<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Duel</title>

<style>
body {
  background:#0f0f0f;
  color:white;
  font-family:Arial;
  text-align:center;
}

.arena {
  display:flex;
  justify-content:space-around;
  margin-top:30px;
}

.player {
  width:40%;
  padding:20px;
  background:#1c1c1c;
  border-radius:12px;
  transition:0.3s;
}

.hp {
  font-size:22px;
  margin:10px 0;
}

.action {
  font-size:40px;
  height:60px;
}

.chosen {
  opacity:0.6;
}

.attackAnim {
  animation:attack 0.4s;
}

.defendAnim {
  animation:defend 0.4s;
}

.specialAnim {
  animation:special 0.6s;
}

@keyframes attack {
  0%{transform:translateX(0)}
  50%{transform:translateX(20px)}
  100%{transform:translateX(0)}
}

@keyframes defend {
  0%{box-shadow:0 0 0px blue}
  50%{box-shadow:0 0 25px blue}
  100%{box-shadow:0 0 0px}
}

@keyframes special {
  0%{box-shadow:0 0 0px purple}
  50%{box-shadow:0 0 40px purple}
  100%{box-shadow:0 0 0px}
}

.log {
  margin-top:25px;
  height:120px;
  overflow:auto;
  background:black;
  padding:10px;
  border-radius:10px;
}
</style>
</head>

<body>

<h1>‚öîÔ∏è Smart Duel ‚öîÔ∏è</h1>
<p>Player 1: WASD | Player 2: ‚¨Ü‚¨Ö‚¨á‚û°</p>

<div class="arena">
  <div class="player" id="p1">
    <h2>Player 1</h2>
    <div class="hp" id="hp1">HP: 100</div>
    <div class="action" id="a1">‚ùî</div>
  </div>

  <div class="player" id="p2">
    <h2>Player 2</h2>
    <div class="hp" id="hp2">HP: 100</div>
    <div class="action" id="a2">‚ùî</div>
  </div>
</div>

<div class="log" id="log"></div>

<script>
let players={
  1:{hp:100,def:false,special:true,choice:null},
  2:{hp:100,def:false,special:true,choice:null}
};

document.addEventListener("keydown",e=>{
  if(players[1].choice && players[2].choice) return;

  switch(e.key){
    case "w": choose(1,"safe"); break;
    case "a": choose(1,"risky"); break;
    case "s": choose(1,"defend"); break;
    case "d": choose(1,"special"); break;

    case "ArrowUp": choose(2,"safe"); break;
    case "ArrowLeft": choose(2,"risky"); break;
    case "ArrowDown": choose(2,"defend"); break;
    case "ArrowRight": choose(2,"special"); break;
  }
});

function choose(p,action){
  if(players[p].choice) return;
  if(action==="special" && !players[p].special) return;

  players[p].choice=action;
  document.getElementById("a"+p).innerText="‚úÖ";
  log(`Player ${p} ÿßÿÆÿ™ÿßÿ± ÿ≠ÿ±ŸÉÿ™Ÿá`);

  if(players[1].choice && players[2].choice)
    setTimeout(resolveTurn,600);
}

function resolveTurn(){
  execute(1,2);
  execute(2,1);

  updateHP();

  if(players[1].hp<=0 || players[2].hp<=0){
    log("üèÜ ÿßŸÑŸÑÿπÿ®ÿ© ÿßŸÜÿ™Ÿáÿ™");
    return;
  }

  players[1].choice=null;
  players[2].choice=null;
  document.getElementById("a1").innerText="‚ùî";
  document.getElementById("a2").innerText="‚ùî";
}

function execute(p,e){
  let act=players[p].choice;
  let dmg=0;
  let el=document.getElementById("p"+p);

  if(act==="safe"){dmg=10; el.classList.add("attackAnim");}
  if(act==="risky" && Math.random()<0.5){dmg=30; el.classList.add("attackAnim");}
  if(act==="defend"){players[p].def=true; el.classList.add("defendAnim");}
  if(act==="special"){
    dmg=40;
    players[p].special=false;
    el.classList.add("specialAnim");
  }

  if(dmg>0){
    if(players[e].def){dmg/=2; players[e].def=false;}
    players[e].hp-=dmg;
  }

  setTimeout(()=>el.className="player",500);
}

function updateHP(){
  hp1.innerText="HP: "+Math.max(players[1].hp,0);
  hp2.innerText="HP: "+Math.max(players[2].hp,0);
}

function log(t){
  let l=document.getElementById("log");
  l.innerHTML+=t+"<br>";
  l.scrollTop=l.scrollHeight;
}
</script>

</body>
</html>