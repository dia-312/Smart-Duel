<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Duel</title>

<style>
body {
  background:#0e0e0e;
  color:white;
  font-family:Arial;
  text-align:center;
}

.arena {
  display:flex;
  justify-content:space-around;
  margin-top:25px;
}

.player {
  width:40%;
  padding:20px;
  background:#1c1c1c;
  border-radius:15px;
  position:relative;
  transition:0.3s;
}

.hp {
  font-size:22px;
  margin:10px 0;
}

.action {
  font-size:28px;
  height:40px;
}

.controls {
  font-size:14px;
  opacity:0.85;
  margin-top:10px;
  text-align:left;
}

.fx {
  position:absolute;
  top:40%;
  left:50%;
  transform:translate(-50%,0);
  font-size:48px;
  opacity:0.7;
  animation:float 1s ease-out forwards;
  pointer-events:none;
}

@keyframes float {
  from {opacity:0.8; transform:translate(-50%,0);}
  to {opacity:0; transform:translate(-50%,-60px);}
}

.attackAnim { animation:attack 0.4s; }
.defendAnim { animation:defend 0.4s; }
.specialAnim { animation:special 0.6s; }

@keyframes attack {
  0%{transform:translateX(0)}
  50%{transform:translateX(20px)}
  100%{transform:translateX(0)}
}
@keyframes defend {
  0%{box-shadow:0 0 0 blue}
  50%{box-shadow:0 0 25px blue}
  100%{box-shadow:0 0 0 blue}
}
@keyframes special {
  0%{box-shadow:0 0 0 purple}
  50%{box-shadow:0 0 40px purple}
  100%{box-shadow:0 0 0 purple}
}

.log {
  margin-top:20px;
  background:black;
  padding:10px;
  height:120px;
  overflow:auto;
  border-radius:10px;
}
</style>
</head>

<body>

<h1>âš”ï¸ Smart Duel âš”ï¸</h1>

<div class="arena">

  <div class="player" id="p1">
    <h2>Player 1</h2>
    <div class="hp" id="hp1">HP: 100</div>
    <div class="action" id="a1">â”</div>
    <div class="controls">
      W â€“ Ù‡Ø¬ÙˆÙ… Ø¶Ø¹ÙŠÙ ğŸŸ¢<br>
      A â€“ Ù‡Ø¬ÙˆÙ… Ù‚ÙˆÙŠ ğŸ”´<br>
      S â€“ Ø¯ÙØ§Ø¹ ğŸ›¡ï¸<br>
      D â€“ Ø­Ø±ÙƒØ© Ø®Ø§ØµØ© â­
    </div>
  </div>

  <div class="player" id="p2">
    <h2>Player 2</h2>
    <div class="hp" id="hp2">HP: 100</div>
    <div class="action" id="a2">â”</div>
    <div class="controls">
      â†‘ â€“ Ù‡Ø¬ÙˆÙ… Ø¶Ø¹ÙŠÙ ğŸŸ¢<br>
      â† â€“ Ù‡Ø¬ÙˆÙ… Ù‚ÙˆÙŠ ğŸ”´<br>
      â†“ â€“ Ø¯ÙØ§Ø¹ ğŸ›¡ï¸<br>
      â†’ â€“ Ø­Ø±ÙƒØ© Ø®Ø§ØµØ© â­
    </div>
  </div>

</div>

<div class="log" id="log"></div>

<script>
let players={
  1:{hp:100,def:false,special:true,choice:null},
  2:{hp:100,def:false,special:true,choice:null}
};

const icons={
  safe:"ğŸŸ¢ Ù‡Ø¬ÙˆÙ… Ø¶Ø¹ÙŠÙ",
  risky:"ğŸ”´ Ù‡Ø¬ÙˆÙ… Ù‚ÙˆÙŠ",
  defend:"ğŸ›¡ï¸ Ø¯ÙØ§Ø¹",
  special:"â­ Ø­Ø±ÙƒØ© Ø®Ø§ØµØ©"
};

document.addEventListener("keydown",e=>{
  if(players[1].choice && players[2].choice) return;

  if(e.key==="w") choose(1,"safe");
  if(e.key==="a") choose(1,"risky");
  if(e.key==="s") choose(1,"defend");
  if(e.key==="d") choose(1,"special");

  if(e.key==="ArrowUp") choose(2,"safe");
  if(e.key==="ArrowLeft") choose(2,"risky");
  if(e.key==="ArrowDown") choose(2,"defend");
  if(e.key==="ArrowRight") choose(2,"special");
});

function choose(p,act){
  if(players[p].choice) return;
  if(act==="special" && !players[p].special) return;

  players[p].choice=act;
  document.getElementById("a"+p).innerText="âœ…";
}

function resolveTurn(){
  reveal();
  setTimeout(()=>{
    execute(1,2);
    execute(2,1);
    updateHP();
    resetTurn();
  },1000);
}

function reveal(){
  a1.innerText=icons[players[1].choice];
  a2.innerText=icons[players[2].choice];
}

function execute(p,e){
  let act=players[p].choice;
  let dmg=0;
  let el=document.getElementById("p"+p);

  if(act==="safe") dmg=10;
  if(act==="risky" && Math.random()<0.5) dmg=30;
  if(act==="defend") players[p].def=true;
  if(act==="special"){ dmg=40; players[p].special=false; }

  if(dmg>0){
    if(players[e].def){ dmg/=2; players[e].def=false; }
    players[e].hp-=dmg;
    fx(e,act);
  }
}

function fx(p,act){
  let div=document.createElement("div");
  div.className="fx";
  div.innerText=icons[act].split(" ")[0];
  document.getElementById("p"+p).appendChild(div);
  setTimeout(()=>div.remove(),1000);
}

function updateHP(){
  hp1.innerText="HP: "+Math.max(players[1].hp,0);
  hp2.innerText="HP: "+Math.max(players[2].hp,0);
}

function resetTurn(){
  players[1].choice=null;
  players[2].choice=null;
  setTimeout(()=>{
    a1.innerText="â”";
    a2.innerText="â”";
  },1000);
}

setInterval(()=>{
  if(players[1].choice && players[2].choice) resolveTurn();
},200);

function log(t){
  log.innerHTML+=t+"<br>";
}
</script>

</body>
</html>